/*!
 * EasyWechat.js v1.1.3
 * (c) 2017-2017 Hpyer
 * Released under the MIT License.
 */
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function t(e){return new Promise(function(t,n){function i(o,r){try{var c=e[r?"throw":"next"](o)}catch(e){return void n(e)}c.done?t(c.value):Promise.resolve(c.value).then(i,s)}function s(e){i(e,1)}i()})}var n=e(require("merge")),i=e(require("request")),s=e(require("body")),o=e(require("url")),r=e(require("qs")),c=e(require("sha1")),a=require("xml2js");class u{constructor(e,t){this.$req=e,this.$res=t}getMethod(){return this.$req?this.$req.method:{}}getQuery(){return this.$req?o.parse(this.$req.url,!0).query:{}}_readBody(){return new Promise((e,t)=>{s(this.$req,(n,i)=>{n?t(n):e(i)})}).catch(e=>{console.log("app_server._readBody()",e)})}getBody(){return t(function*(){return this.$req?yield this._readBody():""}.call(this))}_initResponseOptions(e={}){return e.status=e.status||200,e.contentType=e.contentType||"text/html",e.headers=e.headers||{},e.headers["Content-Type"]=e.contentType,e}sendResponse(e,t={}){if(!this.$res)return!1;t=this._initResponseOptions(t),this.$res.writeHead(t.status,t.headers),this.$res.end(e)}}class f extends u{constructor(e){super(e.req,e.res),this.$ctx=e}sendResponse(e,t={}){if(!this.$ctx)return!1;t=this._initResponseOptions(t),this.$ctx.status=t.status;for(let e in t.headers)this.$ctx.set(e,t.headers[e]);this.$ctx.body=e}}class l extends u{constructor(e,t){super(e,t)}sendResponse(e,t={}){if(!this.$res)return!1;t=this._initResponseOptions(t),this.$res.status(t.status).set(t.headers).send(e)}}const d={appKey:"",appSecret:""};class p{constructor(e={}){if(this.$config=n({},d,e),!this.$config.appKey)throw new Error("\u672a\u586b\u5199appKey");if(!this.$config.appSecret)throw new Error("\u672a\u586b\u5199appSecret");this.$plugins.forEach(e=>{this[e].init(this)})}setAppServerDefault(e,t){this.$config.app=new u(e,t)}setAppServerKoa2(e){this.$config.app=new f(e)}setAppServerExpress(e,t){this.$config.app=new l(e,t)}}p.prototype.requestGet=(e=>new Promise((t,n)=>{i({method:"GET",uri:e},function(e,i,s){if(e)n(e);else{try{s=JSON.parse(s)}catch(e){}t(s)}})})),p.prototype.requestFile=(e=>new Promise((t,n)=>{i({method:"GET",uri:e,encoding:"binary"},function(e,i,s){e?n(e):t(s)})})),p.prototype.requestPost=((e,t=null)=>new Promise((n,s)=>{i({method:"POST",uri:e,json:t},function(e,t,i){e?s(e):n(i)})})),p.prototype.$plugins=[],p.registPlugin=((e,t)=>{p.prototype[e]=t,p.prototype.$plugins.push(e)});const h="https://open.weixin.qq.com/connect/oauth2/authorize",g="https://open.weixin.qq.com/connect/qrconnect",_="https://api.weixin.qq.com/sns/oauth2/access_token",m="https://api.weixin.qq.com/sns/userinfo";class y{constructor(){this.id="",this.nickname="",this.name="",this.avatar="",this.original={},this.token={}}}var k;const $=function(e){k=e},q=function(e=""){if(!k.$config.oauth)return"";if(!k.$config.oauth.scope)throw new Error("\u672a\u586b\u5199\u6388\u6743scope");if(!k.$config.oauth.redirect)throw new Error("\u672a\u586b\u5199\u6388\u6743\u56de\u8c03\u5730\u5740");let t=k.$config.oauth.redirect;if("http://"!=t.substr(0,7)&&"https://"!=t.substr(0,8))throw new Error("\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u56de\u8c03\u5730\u5740\uff0c\u4ee5\u201chttp://\u201d\u6216\u201chttps://\u201d\u5f00\u5934");let n=h;"snsapi_login"==k.$config.oauth.scope&&(n=g);let i={appid:k.$config.appKey,redirect_uri:t,response_type:"code",scope:k.$config.oauth.scope};return e&&(i.state=e),n+"?"+r.stringify(i)+"#wechat_redirect"},w=function(e){return t(function*(){let t=yield b(e);return"snsapi_base"!=k.$config.oauth.scope&&(t=yield T(t)),t}())},b=function(e){return t(function*(){let t={appid:k.$config.appKey,secret:k.$config.appSecret,code:e,grant_type:"authorization_code"},n=_+"?"+r.stringify(t),i=yield k.requestGet(n),s=new y;return s.id=i.openid,s.token=i,s}())},T=function(e){return t(function*(){let t={access_token:e.token.access_token,openid:e.id,lang:"zh_CN"},n=m+"?"+r.stringify(t),i=yield k.requestGet(n);return i.errcode?(console.log("oauth.fetchUserInfo()",i),!1):(e.id=i.openid,e.nickname=i.nickname,e.name=i.nickname,e.avatar=i.headimgurl,e.original=i,e)}())};var v={init:function(e){k=e},redirect:function(e=""){if(!k.$config.oauth)return"";if(!k.$config.oauth.scope)throw new Error("\u672a\u586b\u5199\u6388\u6743scope");if(!k.$config.oauth.redirect)throw new Error("\u672a\u586b\u5199\u6388\u6743\u56de\u8c03\u5730\u5740");let t=k.$config.oauth.redirect;if("http://"!=t.substr(0,7)&&"https://"!=t.substr(0,8))throw new Error("\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u56de\u8c03\u5730\u5740\uff0c\u4ee5\u201chttp://\u201d\u6216\u201chttps://\u201d\u5f00\u5934");let n=h;"snsapi_login"==k.$config.oauth.scope&&(n=g);let i={appid:k.$config.appKey,redirect_uri:t,response_type:"code",scope:k.$config.oauth.scope};return e&&(i.state=e),n+"?"+r.stringify(i)+"#wechat_redirect"},user:function(e){return t(function*(){let t=yield b(e);return"snsapi_base"!=k.$config.oauth.scope&&(t=yield T(t)),t}())}};const E=function(){return parseInt((new Date).getTime()/1e3)},P=function(e=16){let t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},S=function(e,n){return t(function*(){let t=yield e.access_token.getToken();return n+"?access_token="+t}())};var x={getTimestamp:function(){return parseInt((new Date).getTime()/1e3)},randomString:function(e=16){let t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},buildApiUrl:function(e,n){return t(function*(){let t=yield e.access_token.getToken();return n+"?access_token="+t}())}};class j{constructor(){this.$datas={}}fetch(e){return this.contains(e)?this.$datas[e].data:null}contains(e,t=0){let n=this.$datas[e];return"object"==typeof n&&!(n.lifeTime>0&&n.lifeTime-t<x.getTimestamp())}save(e,t=null,n=0){let i={data:t,lifeTime:n>0?n+x.getTimestamp():0};this.$datas[e]=i}delete(e){this.$datas[e]=null}}var A;const C=function(e){(A=e).$config.cache=A.$config.cache||new j},N=function(e){e&&"function"==typeof e.fetch&&"function"==typeof e.contains&&"function"==typeof e.save&&"function"==typeof e.delete&&($cache=e)};var R={init:function(e){(A=e).$config.cache=A.$config.cache||new j},CacheDriver:j,setCache:function(e){e&&"function"==typeof e.fetch&&"function"==typeof e.contains&&"function"==typeof e.save&&"function"==typeof e.delete&&($cache=e)}};const U="https://api.weixin.qq.com/cgi-bin/token";var D;const I=function(e){(D=e).$config.access_token=D.$config.access_token||{},D.$config.access_token.cache_id=D.$config.access_token.cache_id||"NODE_EASYWECHAT_ACCESS_TOKEN",D.$config.access_token.buffer_time=D.$config.access_token.buffer_time||60},K=function(){return t(function*(){let e={appid:D.$config.appKey,secret:D.$config.appSecret,grant_type:"client_credential"},t=U+"?"+r.stringify(e);return yield D.requestGet(t)}())},M=function(e=!1){return t(function*(){let t=D.$config.cache.fetch(D.$config.access_token.cache_id);if(e||!D.$config.cache.contains(D.$config.access_token.cache_id,D.$config.access_token.buffer_time)){let e=yield K();G(e.access_token,e.expires_in),t=e.access_token}return t}())},G=function(e,t=7200){D.$config.cache.save(D.$config.access_token.cache_id,e,t)};var O={init:function(e){(D=e).$config.access_token=D.$config.access_token||{},D.$config.access_token.cache_id=D.$config.access_token.cache_id||"NODE_EASYWECHAT_ACCESS_TOKEN",D.$config.access_token.buffer_time=D.$config.access_token.buffer_time||60},getToken:function(e=!1){return t(function*(){let t=D.$config.cache.fetch(D.$config.access_token.cache_id);if(e||!D.$config.cache.contains(D.$config.access_token.cache_id,D.$config.access_token.buffer_time)){let e=yield K();G(e.access_token,e.expires_in),t=e.access_token}return t}())},setToken:G};const Q="https://api.weixin.qq.com/cgi-bin/ticket/getticket";var F;const H=function(e){(F=e).$config.jssdk=F.$config.jssdk||{},F.$config.jssdk.cache_id=F.$config.jssdk.cache_id||"NODE_EASYWECHAT_JSSKD_TICKET",F.$config.jssdk.buffer_time=F.$config.jssdk.buffer_time||60};var L="";const B=function(e){L=e},J=function(){return t(function*(){let e={access_token:yield F.access_token.getToken(),type:"jsapi"},t=Q+"?"+r.stringify(e);return yield F.requestGet(t)}())},z=function(e,n=!1,i=!0){return t(function*(){let t=F.$config.cache.fetch(F.$config.jssdk.cache_id);if(!F.$config.cache.contains(F.$config.jssdk.cache_id,F.$config.jssdk.buffer_time)){let e=yield J();F.$config.cache.save(F.$config.jssdk.cache_id,e.ticket,e.expires_in),t=e.ticket}let s=L,o=x.randomString(),r=x.getTimestamp(),c=W({jsapi_ticket:t,noncestr:o,timestamp:r,url:s}),a={debug:n,appId:F.$config.appKey,timestamp:r,nonceStr:o,signature:c,url:s,jsApiList:e};return L="",i?JSON.stringify(a):a}())},W=function(e){let t="",n="";for(let i in e)t+=n+i+"="+e[i],n="&";return c(t)};var Y={init:function(e){(F=e).$config.jssdk=F.$config.jssdk||{},F.$config.jssdk.cache_id=F.$config.jssdk.cache_id||"NODE_EASYWECHAT_JSSKD_TICKET",F.$config.jssdk.buffer_time=F.$config.jssdk.buffer_time||60},setUrl:function(e){L=e},config:function(e,n=!1,i=!0){return t(function*(){let t=F.$config.cache.fetch(F.$config.jssdk.cache_id);if(!F.$config.cache.contains(F.$config.jssdk.cache_id,F.$config.jssdk.buffer_time)){let e=yield J();F.$config.cache.save(F.$config.jssdk.cache_id,e.ticket,e.expires_in),t=e.ticket}let s=L,o=x.randomString(),r=x.getTimestamp(),c=W({jsapi_ticket:t,noncestr:o,timestamp:r,url:s}),a={debug:n,appId:F.$config.appKey,timestamp:r,nonceStr:o,signature:c,url:s,jsApiList:e};return L="",i?JSON.stringify(a):a}())}};class X{constructor(e){this.dataParams={ToUserName:"",FromUserName:"",CreateTime:x.getTimestamp(),MsgType:""},this.json=null,this.data="","object"==typeof e?this.json=e:this.data=e}setAttribute(e,t){this.dataParams[e]=t}formatData(){return"<xml>"+this._formatData(this.dataParams)+"</xml>"}_formatData(e){if("object"==typeof e){let t="";for(let n in e)t+=`<${n}>${this._formatData(e[n])}</${n}>`;return t}return"string"==typeof e?"<![CDATA["+e+"]]>":e}getData(){return this.json?JSON.stringify(this.json):(this.data||(this.data=this.formatData()),this.data)}}class Z extends X{constructor(e){super(""),this.dataParams.MsgType="text",this.dataParams.Content=e.content||""}content(e){this.dataParams.Content=e}}var V;const ee=function(e){V=e,te=function(){}};let te,ne;const ie=function(e){"function"!=typeof e&&(e=function(){}),te=e},se=function(){return t(function*(){let e=V.$config.app;if(!e)throw new Error("\u672a\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u5e94\u7528\u670d\u52a1\u5668");if("GET"==e.getMethod()){let t=e.getQuery();if(!(t.signature&&t.echostr&&t.timestamp&&t.nonce))return void e.sendResponse("Hello node-easywechat");let n=[t.nonce,t.timestamp,V.$config.token].sort();c(n.join(""))===t.signature?e.sendResponse(t.echostr):e.sendResponse("fail")}else{let t=yield e.getBody();if(ne=yield oe(t),te&&"function"==typeof te){let t=yield te(ne);if(!t)return void e.sendResponse("SUCCESS");let n=null;if((n="string"==typeof t?new Z({content:t}):t)&&"object"==typeof n){n.setAttribute("ToUserName",ne.FromUserName),n.setAttribute("FromUserName",ne.ToUserName);let t=n.getData();console.log("server.send()",t),e.sendResponse(t)}}}}())},oe=function(e){return t(function*(){return new Promise((t,n)=>{a.parseString(e,(e,i)=>{if(e)n(e);else{let e;if(i&&i.xml){e={};for(let t in i.xml)e[t]=i.xml[t][0]}t(e)}})}).catch(e=>{console.log("server.parseMessage()",e)})}())},re=function(){return ne};var ce={init:function(e){V=e,te=function(){}},setMessageHandler:function(e){"function"!=typeof e&&(e=function(){}),te=e},serve:function(){return t(function*(){let e=V.$config.app;if(!e)throw new Error("\u672a\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u5e94\u7528\u670d\u52a1\u5668");if("GET"==e.getMethod()){let t=e.getQuery();if(!(t.signature&&t.echostr&&t.timestamp&&t.nonce))return void e.sendResponse("Hello node-easywechat");let n=[t.nonce,t.timestamp,V.$config.token].sort();c(n.join(""))===t.signature?e.sendResponse(t.echostr):e.sendResponse("fail")}else{let t=yield e.getBody();if(ne=yield oe(t),te&&"function"==typeof te){let t=yield te(ne);if(!t)return void e.sendResponse("SUCCESS");let n=null;if((n="string"==typeof t?new Z({content:t}):t)&&"object"==typeof n){n.setAttribute("ToUserName",ne.FromUserName),n.setAttribute("FromUserName",ne.ToUserName);let t=n.getData();console.log("server.send()",t),e.sendResponse(t)}}}}())},getMessage:function(){return ne}};const ae="https://api.weixin.qq.com/cgi-bin/message/template/send",ue="https://api.weixin.qq.com/cgi-bin/template/get_industry",fe="https://api.weixin.qq.com/cgi-bin/template/api_set_industry",le="https://api.weixin.qq.com/cgi-bin/template/api_add_template",de="https://api.weixin.qq.com/cgi-bin/template/get_all_private_template",pe="https://api.weixin.qq.com/cgi-bin/template/del_private_template";var he;const ge=function(e){he=e,me=new _e};class _e{constructor(){this.reset()}}_e.prototype.reset=function(){this.touser="",this.template_id="",this.url="",this.miniprogram={},this.data=[]};let me=null;const ye=function(e){return me.touser=e,this},ke=function(e){return me.template_id=e,this},$e=function(e){return me.url=e,this},qe=function(e){return me.data=we(e),this},we=function(e){let t={};for(let n in e){let i=e[n];"object"==typeof i?void 0!==i.length?t[n]={value:i[0],color:i[1]}:t[n]=i:t[n]={value:i}}return t},be=function(e=null){return t(function*(){if(e?e.data&&(e.data=we(e.data)):e={},e=n({},me,e),me.reset(),!e.touser)throw new Error("\u7528\u6237openid\u4e3a\u7a7a");if(!e.template_id)throw new Error("\u6a21\u677fid\u4e3a\u7a7a");let t=yield x.buildApiUrl(he,ae);return yield he.requestPost(t,e)}())},Te=function(){return t(function*(){let e=yield x.buildApiUrl(he,ue);return yield he.requestPost(e)}())},ve=function(e,n){return t(function*(){let t=yield x.buildApiUrl(he,fe),i={industry_id1:e,industry_id2:n};return yield he.requestPost(t,i)}())},Ee=function(e){return t(function*(){let t=yield x.buildApiUrl(he,le),n={template_id_short:e};return yield he.requestPost(t,n)}())},Pe=function(){return t(function*(){let e=yield x.buildApiUrl(he,de);return yield he.requestPost(e)}())},Se=function(e){return t(function*(){let t=yield x.buildApiUrl(he,pe),n={template_id:e};return yield he.requestPost(t,n)}())};var xe={init:function(e){he=e,me=new _e},to:ye,withTo:ye,andTo:ye,receiver:ye,withReceiver:ye,andhReceiver:ye,uses:ke,withUses:ke,andUses:ke,template:ke,withTemplate:ke,andTemplate:ke,templateId:ke,withTemplateId:ke,andTemplateId:ke,url:$e,withUrl:$e,andUrl:$e,link:$e,withLink:$e,andLink:$e,linkTo:$e,withLinkTo:$e,andLinkTo:$e,data:qe,withData:qe,andData:qe,send:function(e=null){return t(function*(){if(e?e.data&&(e.data=we(e.data)):e={},e=n({},me,e),me.reset(),!e.touser)throw new Error("\u7528\u6237openid\u4e3a\u7a7a");if(!e.template_id)throw new Error("\u6a21\u677fid\u4e3a\u7a7a");let t=yield x.buildApiUrl(he,ae);return yield he.requestPost(t,e)}())},getIndustry:function(){return t(function*(){let e=yield x.buildApiUrl(he,ue);return yield he.requestPost(e)}())},setIndustry:function(e,n){return t(function*(){let t=yield x.buildApiUrl(he,fe),i={industry_id1:e,industry_id2:n};return yield he.requestPost(t,i)}())},addTemplate:function(e){return t(function*(){let t=yield x.buildApiUrl(he,le),n={template_id_short:e};return yield he.requestPost(t,n)}())},getPrivateTemplates:function(){return t(function*(){let e=yield x.buildApiUrl(he,de);return yield he.requestPost(e)}())},deletePrivateTemplate:function(e){return t(function*(){let t=yield x.buildApiUrl(he,pe),n={template_id:e};return yield he.requestPost(t,n)}())}};const je="https://api.weixin.qq.com/cgi-bin/qrcode/create",Ae="https://mp.weixin.qq.com/cgi-bin/showqrcode";var Ce;const Ne=function(e){Ce=e},Re=function(e,n=null){return t(function*(){((n=parseInt(n))<=0||n>604800)&&(n=604800);let t="";"string"==typeof e?(e={scene_str:e},t="QR_STR_SCENE"):(e={scene_id:e},t="QR_SCENE");let i={expire_seconds:n,action_name:t,action_info:{scene:e}},s=yield Ce.access_token.getToken(),o=je+"?access_token="+s;return yield Ce.requestPost(o,i)}())},Ue=function(e){return t(function*(){let t="";"string"==typeof e?(e={scene_str:e},t="QR_LIMIT_STR_SCENE"):(e={scene_id:e},t="QR_LIMIT_SCENE");let n={action_name:t,action_info:{scene:e}},i=yield Ce.access_token.getToken(),s=je+"?access_token="+i;return yield Ce.requestPost(s,n)}())},De=function(e){return t(function*(){let t=Ae+"?ticket="+e;return yield Ce.requestFile(t)}())};var Ie={init:function(e){Ce=e},temporary:function(e,n=null){return t(function*(){((n=parseInt(n))<=0||n>604800)&&(n=604800);let t="";"string"==typeof e?(e={scene_str:e},t="QR_STR_SCENE"):(e={scene_id:e},t="QR_SCENE");let i={expire_seconds:n,action_name:t,action_info:{scene:e}},s=yield Ce.access_token.getToken(),o=je+"?access_token="+s;return yield Ce.requestPost(o,i)}())},forever:function(e){return t(function*(){let t="";"string"==typeof e?(e={scene_str:e},t="QR_LIMIT_STR_SCENE"):(e={scene_id:e},t="QR_LIMIT_SCENE");let n={action_name:t,action_info:{scene:e}},i=yield Ce.access_token.getToken(),s=je+"?access_token="+i;return yield Ce.requestPost(s,n)}())},url:function(e){return t(function*(){let t=Ae+"?ticket="+e;return yield Ce.requestFile(t)}())}};const Ke="https://api.weixin.qq.com/cgi-bin/user/info",Me="https://api.weixin.qq.com/cgi-bin/user/info/batchget",Ge="https://api.weixin.qq.com/cgi-bin/user/get",Oe="https://api.weixin.qq.com/cgi-bin/user/info/updateremark",Qe="https://api.weixin.qq.com/cgi-bin/tags/members/getblacklist",Fe="https://api.weixin.qq.com/cgi-bin/tags/members/batchblacklist",He="https://api.weixin.qq.com/cgi-bin/tags/members/batchunblacklist";class Le{constructor(){this.id="",this.nickname="",this.name="",this.avatar="",this.original={},this.token={}}}var Be;const Je=function(e){Be=e},ze=function(e,n="zh_CN"){return t(function*(){let t=yield Be.access_token.getToken(),i=Ke+"?access_token="+t+"&openid="+e+"&lang="+n,s=yield Be.requestGet(i),o=new Le;return o.id=s.openid,o.nickname=s.nickname,o.name=s.nickname,o.avatar=s.headimgurl,o.original=s,o}())},We=function(e){return t(function*(){let t={user_list:e},n=yield Be.access_token.getToken(),i=Me+"?access_token="+n;return yield Be.requestPost(i,t)}())},Ye=function(e=null){return t(function*(){let t=yield Be.access_token.getToken(),n=Ge+"?access_token="+t;return e&&(n+="&next_openid="+e),yield Be.requestGet(n)}())},Xe=function(e,n){return t(function*(){let e=yield Be.access_token.getToken(),t=Oe+"?access_token="+e;return yield Be.requestPost(t)}())},Ze=function(e){return t(function*(){let t={};e&&(t.begin_openid=e);let n=yield Be.access_token.getToken(),i=Qe+"?access_token="+n;return yield Be.requestPost(i,t)}())},Ve=function(e){return t(function*(){let t={openid_list:e},n=yield Be.access_token.getToken(),i=Fe+"?access_token="+n;return yield Be.requestPost(i,t)}())},et=function(e){return t(function*(){let t={openid_list:e},n=yield Be.access_token.getToken(),i=He+"?access_token="+n;return yield Be.requestPost(i,t)}())},tt=function(e){return t(function*(){return yield Ve([e])}())},nt=function(e){return t(function*(){return yield et([e])}())};var it={init:function(e){Be=e},get:function(e,n="zh_CN"){return t(function*(){let t=yield Be.access_token.getToken(),i=Ke+"?access_token="+t+"&openid="+e+"&lang="+n,s=yield Be.requestGet(i),o=new Le;return o.id=s.openid,o.nickname=s.nickname,o.name=s.nickname,o.avatar=s.headimgurl,o.original=s,o}())},batchGet:function(e){return t(function*(){let t={user_list:e},n=yield Be.access_token.getToken(),i=Me+"?access_token="+n;return yield Be.requestPost(i,t)}())},lists:function(e=null){return t(function*(){let t=yield Be.access_token.getToken(),n=Ge+"?access_token="+t;return e&&(n+="&next_openid="+e),yield Be.requestGet(n)}())},remark:function(e,n){return t(function*(){let e=yield Be.access_token.getToken(),t=Oe+"?access_token="+e;return yield Be.requestPost(t)}())},blacklist:function(e){return t(function*(){let t={};e&&(t.begin_openid=e);let n=yield Be.access_token.getToken(),i=Qe+"?access_token="+n;return yield Be.requestPost(i,t)}())},batchBlock:Ve,batchUnblock:et,block:function(e){return t(function*(){return yield Ve([e])}())},unblock:function(e){return t(function*(){return yield et([e])}())}};p.registPlugin("oauth",v),p.registPlugin("cache",R),p.registPlugin("access_token",O),p.registPlugin("jssdk",Y),p.registPlugin("server",ce),p.registPlugin("notice",xe),p.registPlugin("qrcode",Ie),p.registPlugin("user",it),module.exports=p;